---
Title: chattunのSocket Mode対応をした
Date: 2021-09-04T03:01:03+09:00
URL: https://sisisin.hateblo.jp/entry/2021/09/04/030103
EditURL: https://blog.hatena.ne.jp/sisisin444/sisisin.hateblo.jp/atom/entry/26006613804474040
---

まだ[マージしてない](https://github.com/sisisin/chattun/pull/41) けど、普通に普段から動かして使えてるので苦労話というか愚痴を書く


---

とにかくSlackAPIがしんどかった  
一番しんどかったのは「EventAPIでユーザー固有のイベントを受け取れるようにする」という部分  
これ今回の実装の前にEventAPIの調査段階（つまりchattunの初期実装の頃、2018年10月頃。[当時の記事](https://sisisin.hateblo.jp/entry/2018/12/03/100000)）から何度も調べて何度もわからずに来て今回ようやく見つけられて勝利に至った  
userScope設定すればいいなんてドキュメントいくら探しても書いてなくてなんなの・・・ってなってしまった・・・  
  
そもそもなんでSocket Mode対応をしたのかって、現職のslackワークスペースでも使おうとしてアプリ作ったりしたらどう頑張ってもRTM APIを使ったアプリのOAuthフローが通せなくてこれもう動かないのでは・・・と途方に暮れて仕方なくやったという出発点からしてSlack APIにしんどさを感じてしまう
RTM APIはもはやいつdeprecatedになっても不思議じゃない気配があるけど、ドキュメント的には有効なAPIとして記載されてるので使えないはずはないし、前職では動いてたんだから動かせないはずがないのだけど・・・  
  
  
まあRTM APIは間違いなくいずれ廃止するであろう機能なので余力があるときにやれて良かったとは思いつつ・・・  
  
完全に愚痴になってしまった
